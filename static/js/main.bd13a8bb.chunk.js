(this["webpackJsonpleave-me"]=this["webpackJsonpleave-me"]||[]).push([[0],{29:function(e,t,a){e.exports=a(45)},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=a(14),s=a(10),i=(a(38),a(4)),u=a(6),m=a(9),d=a(12),p=a(11),v=function(e){var t=e.product.title;return r.a.createElement(n.Fragment,null,r.a.createElement("span",null,t))},f=r.a.createContext(),b=f.Provider,E=f.Consumer,g=function(){return function(e){return function(t){return r.a.createElement(E,null,(function(a){return r.a.createElement(e,Object.assign({},t,{shopService:a}))}))}}},h=(a(39),function(){return r.a.createElement("div",null,"Spinner")}),O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.shopService.getAllProducts().then((function(t){e.props.productsLoaded(t)}))}},{key:"render",value:function(){var e=this.props,t=e.products,a=e.loading;return console.log(a),a?r.a.createElement(h,null):r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(v,{product:e}))})))}}]),a}(n.Component),j={productsLoaded:function(e){return{type:"PRODUCTS_LOADED",payload:e}}},N=g()(Object(l.b)((function(e){return{products:e.products,loading:e.loading}}),j)(O)),y=function(){return r.a.createElement(N,null)},_=function(){return r.a.createElement("div",null,"Product page")},w=function(e){return"/leave-me"+e},x=function(e){var t=e.product,a=t.title,n=t.image,c=t.cost,o=(t.id,t.count);return r.a.createElement("div",{className:"row cart__row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("img",{alt:"product",src:n})),r.a.createElement("div",{className:"col-8 align-content-between d-flex justify-content-around flex-column"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement(s.b,{to:"/"},a)),r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{className:"close__product",src:w("/img/close.svg"),alt:"close"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 count__sidebar"},r.a.createElement("p",null,r.a.createElement("img",{alt:"minus",className:"control__sidebar left",src:w("/img/minus.svg")}),r.a.createElement("span",null,o," \u0448\u0442"),r.a.createElement("img",{alt:"plus",className:"control__sidebar right",src:w("/img/more.svg")}))),r.a.createElement("div",{className:"col-6"},r.a.createElement("p",{className:"float-right"},c)))))},k=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.orderTotal,a=e.cartItems,n=e.visible,c=e.toggleSidebar,o=n?"active":"";return r.a.createElement("div",{className:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar cart__sidebar ".concat(o)},r.a.createElement("div",{className:"sidebar__header col-12"},r.a.createElement("p",{className:"text-center text-uppercase"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430")),r.a.createElement("div",{className:"body__sidebar col-12"},a.map((function(e){return r.a.createElement(x,{key:e.id,product:e})}))),r.a.createElement("div",{className:"footer__sidebar col-12"},r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",{className:"text"},"\u0418\u0442\u043e\u0433\u043e: ",t,"\u0440"))),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement(s.b,{to:"/",className:"btn btn-primary"},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437")))),r.a.createElement("img",{className:"close__sidebar justify-content-center",onClick:c,src:w("/img/next.svg"),alt:"close"})))}}]),a}(n.Component),S=Object(l.b)((function(e){return{orderTotal:e.orderTotal,cartItems:e.cartItems}}))(k),C=(a(41),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={sidebarVisible:!1},e.toggleSidebar=function(){e.setState({sidebarVisible:!e.state.sidebarVisible})},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"main-nav row align-items-center flex-nowrap"},r.a.createElement("div",{className:"col-4 offset-4 main-nav__logo"},r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{src:w("/img/logo.svg"),alt:"logo"}))),r.a.createElement("div",{className:"col-4"},r.a.createElement("img",{className:"main-nav__cart-icon toggle-bag float-right",onClick:this.toggleSidebar,src:w("/img/bag.svg"),alt:"bag"}))),r.a.createElement(S,{toggleSidebar:this.toggleSidebar,visible:this.state.sidebarVisible}))}}]),a}(n.Component)),D=(a(42),function(){return r.a.createElement(i.c,null,r.a.createElement(C,null),r.a.createElement(i.a,{path:"/",component:y,exact:!0}),r.a.createElement(i.a,{path:"/product/:id?",component:_}))}),P=(a(43),function(){return r.a.createElement("div",null,"Error")}),T=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(m.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(P,null):this.props.children}}]),a}(n.Component),A=a(8),R=a.n(A),I=a(16),L=a(19),V=a(28),B={products:[],loading:!0,orderTotal:300,cartItems:[{title:"123456",image:"12345",cost:"123456",id:"123456",count:"23456"}]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCTS_LOADED":return Object(V.a)({},e,{products:t.payload,loading:!1});default:return e}},J=Object(L.b)(F),U=new function e(){var t=this;Object(u.a)(this,e),this._apiBase="https://majeste.pythonanywhere.com/api/v1",this.getResource=function(){var e=Object(I.a)(R.a.mark((function e(a){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllProducts=Object(I.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/products/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getProduct=function(){var e=Object(I.a)(R.a.mark((function e(a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/products/".concat(a,"/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addOrder=function(){var e=Object(I.a)(R.a.mark((function e(a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/orders/",{method:"POST",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};o.a.render(r.a.createElement(l.a,{store:J},r.a.createElement(T,null,r.a.createElement(b,{value:U},r.a.createElement(s.a,{basename:"/leave-me"},r.a.createElement(D,null))))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.bd13a8bb.chunk.js.map