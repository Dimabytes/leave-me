(this["webpackJsonpleave-me"]=this["webpackJsonpleave-me"]||[]).push([[0],{34:function(e,t,a){e.exports=a(68)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(13),s=a.n(c),l=a(15),o=a(2),i=(a(43),a(6)),u=a(5),m=a(8),d=a(10),p=a(9),f=a(17),v=(a(44),a(45),a(32)),E=a.n(v),g=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).next=r.next.bind(Object(f.a)(r)),r.prev=r.prev.bind(Object(f.a)(r)),r}return Object(m.a)(a,[{key:"next",value:function(){this.slider.slickNext()}},{key:"prev",value:function(){this.slider.slickPrev()}},{key:"render",value:function(){var e=this,t=this.props.product,a=t.id,r=t.images;return n.a.createElement(o.b,{to:"/product/".concat(a),className:"col-lg-4 col-6 product-card"},n.a.createElement(E.a,Object.assign({ref:function(t){return e.slider=t}},{dots:!1,arrows:!1,accessibility:!1,slidesToShow:1,slidesToScroll:1,speed:0,fade:!0,cssEase:"linear"},{className:"card-title"}),r.map((function(t,a){return n.a.createElement("img",{onMouseOver:e.next,onMouseOut:e.prev,key:a,alt:"",src:t})}))))}}]),a}(r.Component),b=n.a.createContext(),h=b.Provider,N=b.Consumer,_=function(){return function(e){return function(t){return n.a.createElement(N,null,(function(a){return n.a.createElement(e,Object.assign({},t,{shopService:a}))}))}}},y=function(e,t){return function(){t({type:"FETCH_PRODUCTS_REQUEST"}),e.getAllProducts().then((function(e){return t({type:"FETCH_PRODUCTS_SUCCESS",payload:e})})).catch((function(e){return t(function(e){return{type:"FETCH_PRODUCTS_FAILURE",payload:e}}(e))}))}},j=(a(62),function(){return n.a.createElement("div",{className:"lds-hourglass"})}),O=(a(63),function(){return n.a.createElement("div",{className:"error-alert"},n.a.createElement("h1",{className:"alert alert-danger"},"\u041e\u0448\u0438\u0431\u043a\u0430! \u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"))}),w=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},x=function(e){var t=e.products;return n.a.createElement("div",{className:"container-xl products-grid"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},t.map((function(e){return n.a.createElement(g,{key:e.id,product:e})}))))},k=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this.props,t=e.products,a=e.loading,r=e.error;return a?n.a.createElement(j,null):r?n.a.createElement(O,null):n.a.createElement(x,{products:t})}}]),a}(r.Component),C=w(_(),Object(l.b)((function(e){return{products:e.products,loading:e.loading,error:e.error}}),(function(e,t){var a=t.shopService;return{fetchProducts:y(a,e)}})))(k),S=function(){return n.a.createElement("main",{className:"main-page"},n.a.createElement(C,null))},T=function(){return n.a.createElement("div",null,"Product page")},P=function(e){return"/leave-me"+e},R=(a(64),function(){return n.a.createElement("footer",{className:"container-fluid"},n.a.createElement("div",{className:"d-flex flex-row justify-content-center align-items-baseline"},n.a.createElement("div",{className:"p-2 d-flex justify-content-end w-7r"},n.a.createElement(o.b,{className:"link__footer",to:"#"},"Policy")),n.a.createElement("div",{className:"p-2 d-flex justify-content-center w-7r"},n.a.createElement("p",{className:"text__footer"},"Follow us")),n.a.createElement("div",{className:"p-2 links__footer d-flex justify-content-start w-7r"},n.a.createElement(o.b,{to:"#",className:"link__vk"},n.a.createElement("img",{className:"img__footer",alt:"vk",src:P("/img/vk.svg")})),n.a.createElement(o.b,{to:"#",className:"link__insta"},n.a.createElement("img",{alt:"instagram",src:P("/img/instagram.svg")})))),n.a.createElement("div",{className:"d-flex flex-row justify-content-center"},n.a.createElement("div",{className:"p-2"},n.a.createElement("p",{className:"text__footer"},"\xa9Leave me 2020"))))}),U=function(e){var t=e.product,a=t.title,r=t.image,c=t.cost,s=t.id,l=t.count;return n.a.createElement("div",{className:"row cart__row"},n.a.createElement("div",{className:"col-4"},n.a.createElement("img",{alt:"product",src:r})),n.a.createElement("div",{className:"col-8 align-content-between d-flex justify-content-around flex-column"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-10"},n.a.createElement(o.b,{to:"/product/".concat(s)},a)),n.a.createElement("div",{className:"col-1"},n.a.createElement("img",{className:"close__product",src:P("/img/close.svg"),alt:"close"}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6 count__sidebar"},n.a.createElement("p",null,n.a.createElement("img",{alt:"minus",className:"control__sidebar left",src:P("/img/minus.svg")}),n.a.createElement("span",null,l," \u0448\u0442"),n.a.createElement("img",{alt:"plus",className:"control__sidebar right",src:P("/img/more.svg")}))),n.a.createElement("div",{className:"col-6"},n.a.createElement("p",{className:"float-right"},c)))))},F=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.orderTotal,a=e.cartItems,r=e.visible,c=e.toggleSidebar,s=r?"active":"";return n.a.createElement("div",{className:"sidebar-wrapper"},n.a.createElement("div",{className:"sidebar cart__sidebar ".concat(s)},n.a.createElement("div",{className:"sidebar__header col-12"},n.a.createElement("p",{className:"text-center text-uppercase"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430")),n.a.createElement("div",{className:"body__sidebar col-12"},a.map((function(e){return n.a.createElement(U,{key:e.id,product:e})}))),n.a.createElement("div",{className:"footer__sidebar col-12"},n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"text"},"\u0418\u0442\u043e\u0433\u043e: ",t,"\u0440"))),n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement(o.b,{to:"/",className:"btn btn-primary"},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437")))),n.a.createElement("img",{className:"close__sidebar justify-content-center",onClick:c,src:P("/img/next.svg"),alt:"close"})))}}]),a}(r.Component),D=Object(l.b)((function(e){return{orderTotal:e.orderTotal,cartItems:e.cartItems}}))(F),A=(a(65),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={sidebarVisible:!1},e.toggleSidebar=function(){e.setState({sidebarVisible:!e.state.sidebarVisible})},e}return Object(m.a)(a,[{key:"render",value:function(){return n.a.createElement(r.Fragment,null,n.a.createElement("nav",{className:"main-nav row align-items-center flex-nowrap"},n.a.createElement("div",{className:"col-4 offset-4 main-nav__logo"},n.a.createElement(o.b,{to:"/"},n.a.createElement("img",{src:P("/img/logo.svg"),alt:"logo"}))),n.a.createElement("div",{className:"col-4"},n.a.createElement("img",{className:"main-nav__cart-icon toggle-bag float-right",onClick:this.toggleSidebar,src:P("/img/bag.svg"),alt:"bag"}))),n.a.createElement(D,{toggleSidebar:this.toggleSidebar,visible:this.state.sidebarVisible}))}}]),a}(r.Component)),I=(a(66),function(){return n.a.createElement(r.Fragment,null,n.a.createElement(A,null),n.a.createElement(i.c,null,n.a.createElement(i.a,{path:"/",component:S,exact:!0}),n.a.createElement(i.a,{path:"/product/:id?",component:T})),n.a.createElement(R,null))}),H=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={hasError:!1},e}return Object(m.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?n.a.createElement(O,null):this.props.children}}]),a}(r.Component),V=a(12),B=a.n(V),L=a(18),M=a(23),J=a(24),Q={products:[],loading:!0,orderTotal:300,error:null,cartItems:[{title:"123456",image:"https://majeste.pythonanywhere.com/media/product.png",cost:"123456",id:"123456",count:"23456"}]},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS_REQUEST":return Object(J.a)({},e,{products:[],error:null,loading:!0});case"FETCH_PRODUCTS_SUCCESS":return console.log(t.payload),Object(J.a)({},e,{products:t.payload,error:null,loading:!1});case"FETCH_PRODUCTS_FAILURE":return Object(J.a)({},e,{products:[],error:t.payload,loading:!1});default:return e}},z=Object(M.b)(q),G=new function e(){var t=this;Object(u.a)(this,e),this._apiBase="https://majeste.pythonanywhere.com/api/v1",this.getResource=function(){var e=Object(L.a)(B.a.mark((function e(a){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllProducts=Object(L.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/products/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getProduct=function(){var e=Object(L.a)(B.a.mark((function e(a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/products/".concat(a,"/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addOrder=function(){var e=Object(L.a)(B.a.mark((function e(a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/orders/",{method:"POST",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};s.a.render(n.a.createElement(l.a,{store:z},n.a.createElement(H,null,n.a.createElement(h,{value:G},n.a.createElement(o.a,{basename:"/leave-me"},n.a.createElement(I,null))))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.d90e91b7.chunk.js.map