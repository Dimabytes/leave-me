(this["webpackJsonpleave-me"]=this["webpackJsonpleave-me"]||[]).push([[0],{32:function(e,t,r){},36:function(e,t,r){e.exports=r(72)},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},72:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(15),o=r.n(c),l=r(14),s=r(2),i=(r(45),r(46),r(5)),u=r(3),d=r(7),m=r(9),p=r(8),f=(r(47),function(){return n.a.createElement("div",{className:"error-alert"},n.a.createElement("h1",{className:"alert alert-danger"},"\u041e\u0448\u0438\u0431\u043a\u0430! \u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"))}),v=(r(48),function(){return n.a.createElement("div",{className:"lds-hourglass"})}),E=function(e,t){return function(){t({type:"FETCH_PRODUCTS_REQUEST"}),e.getAllProducts().then((function(e){return t({type:"FETCH_PRODUCTS_SUCCESS",payload:e})})).catch((function(e){return t(function(e){return{type:"FETCH_PRODUCTS_FAILURE",payload:e}}(e))}))}},g=function(e,t){return function(r){t({type:"FETCH_PRODUCT_REQUEST"}),e.getProduct(r).then((function(e){return t({type:"FETCH_PRODUCT_SUCCESS",payload:e})})).catch((function(e){return t(function(e){return{type:"FETCH_PRODUCT_FAILURE",payload:e}}(e))}))}},b=r(13),_=n.a.createContext(),h=_.Provider,y=_.Consumer,O=function(){return function(e){return function(t){return n.a.createElement(y,null,(function(r){return n.a.createElement(e,Object.assign({},t,{shopService:r}))}))}}},C=r(19),N=(r(49),r(32),r(25)),j=r.n(N),S=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(u.a)(this,r),(a=t.call(this,e)).next=a.next.bind(Object(C.a)(a)),a.prev=a.prev.bind(Object(C.a)(a)),a}return Object(d.a)(r,[{key:"next",value:function(){this.slider.slickNext()}},{key:"prev",value:function(){this.slider.slickPrev()}},{key:"render",value:function(){var e=this,t=this.props.product,r=t.id,a=t.images;return n.a.createElement(s.b,{to:"/product/".concat(r),className:"col-lg-4 col-6 product-card"},n.a.createElement(j.a,Object.assign({ref:function(t){return e.slider=t}},{dots:!1,arrows:!1,accessibility:!1,slidesToShow:1,slidesToScroll:1,speed:0,fade:!0,cssEase:"linear"},{className:"card-title"}),a.map((function(t,r){return n.a.createElement("img",{onMouseOver:e.next,onMouseOut:e.prev,key:r,alt:"",src:t})}))))}}]),r}(a.Component),T=function(e){var t=e.products;return n.a.createElement("div",{className:"container-xl products-grid"},n.a.createElement("div",{className:"row align-items-center justify-content-center"},t.map((function(e){return n.a.createElement(S,{key:e.id,product:e})}))))},w=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this.props,t=e.products,r=e.loading;return e.error?n.a.createElement(f,null):r?n.a.createElement(v,null):n.a.createElement(T,{products:t})}}]),r}(a.Component),R=Object(b.b)(O(),Object(l.b)((function(e){var t=e.productList;return{products:t.products,loading:t.loading,error:t.error}}),(function(e,t){var r=t.shopService;return{fetchProducts:E(r,e)}})))(w),x=function(){return n.a.createElement("main",{className:"main-page"},n.a.createElement(R,null))};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var D=n.a.createElement("g",null,n.a.createElement("g",null,n.a.createElement("g",null,n.a.createElement("path",{d:"M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12    c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028    c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265    c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z",className:"active-path",fill:"#FFFFFF"})))),I=function(e){var t=e.svgRef,r=e.title,a=P(e,["svgRef","title"]);return n.a.createElement("svg",k({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 492.004 492.004",style:{enableBackground:"new 0 0 492.004 492.004"},xmlSpace:"preserve",ref:t},a),r?n.a.createElement("title",null,r):null,D)},U=n.a.forwardRef((function(e,t){return n.a.createElement(I,k({svgRef:t},e))}));r.p;function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var z=n.a.createElement("path",{className:"active-path",d:"m198.61 246.1 184.06-184.06c5.068-5.056 7.856-11.816 7.856-19.024 0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12c-5.06-5.072-11.824-7.864-19.032-7.864s-13.964 2.792-19.028 7.864l-219.15 219.14c-5.084 5.08-7.868 11.868-7.848 19.084-0.02 7.248 2.76 14.028 7.848 19.112l218.94 218.93c5.064 5.072 11.82 7.864 19.032 7.864 7.208 0 13.964-2.792 19.032-7.864l16.124-16.12c10.492-10.492 10.492-27.572 0-38.06l-183.85-183.85z",fill:"#fff"}),L=function(e){var t=e.svgRef,r=e.title,a=F(e,["svgRef","title"]);return n.a.createElement("svg",A({className:"nav__slider",enableBackground:"new 0 0 492 492",viewBox:"0 0 492 492",xmlSpace:"preserve",ref:t},a),r?n.a.createElement("title",null,r):null,z)},H=n.a.forwardRef((function(e,t){return n.a.createElement(L,A({svgRef:t},e))}));r.p;function M(e){var t=e.onClick;return n.a.createElement(U,{onClick:t,className:"nav__slider slider__nav-left"})}function B(e){var t=e.onClick;return n.a.createElement(H,{alt:"next",onClick:t,className:"nav__slider slider__nav-right"})}var V=function(e){var t=e.product,r=t.cost,a=t.title,c=t.images,o=t.sizes,l=t.description,i=t.structure,u=e.onAddedToCart,d=e.onChangeSize,m={slidesToShow:1,slidesToScroll:1,cssEase:"linear",nextArrow:n.a.createElement(M,null),prevArrow:n.a.createElement(B,null)};return n.a.createElement("div",{className:"row singe-product"},n.a.createElement("div",{className:"col-lg-7 col-md-7 col-12 images__product"},n.a.createElement(j.a,Object.assign({},m,{className:"card-title"}),c.map((function(e,t){return n.a.createElement("img",{className:"singe-product__slider-image",key:t,alt:"",src:e})})))),n.a.createElement("div",{className:"offset-md-1 col-md-4 col-12 rounded info__product"},n.a.createElement("div",{className:"row"},n.a.createElement("h1",{className:"header__product"},a)),n.a.createElement("div",{className:"row"},n.a.createElement("h3",{className:"cost__product"},r," RUB")),n.a.createElement("div",{className:"row controls__product"},n.a.createElement("div",{className:"col6"},n.a.createElement("div",{className:"form-group"},n.a.createElement("select",{onChange:function(e){return d(e.target.value)},className:"form-control select__product"},o.map((function(e,t){return n.a.createElement("option",{key:t},e)}))))),n.a.createElement("div",{className:"col6"},n.a.createElement("div",{className:"btn btn-primary btn-product",onClick:function(){return u()}},"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))),n.a.createElement("p",{className:"row text__product"},l),n.a.createElement("p",{className:"row text__product"},i),n.a.createElement("div",{className:"row"},n.a.createElement(s.b,{className:"link__product",to:"#"},"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432"))))},Q=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"componentWillMount",value:function(){this.props.fetchProduct(this.props.itemId)}},{key:"render",value:function(){var e=this.props,t=e.product,r=e.loading,a=e.error,c=e.onAddedToCart,o=e.onRemovedToFromCart,l=e.onChangeSize;return a?n.a.createElement(f,null):r||!t?n.a.createElement(v,null):t?n.a.createElement(V,{product:t,onAddedToCart:c,onRemovedToFromCart:o,onChangeSize:l}):void 0}}]),r}(a.Component),G=Object(b.b)(O(),Object(l.b)((function(e){var t=e.productPage;return{product:t.product,loading:t.loading,error:t.error}}),(function(e,t){var r=t.shopService;return{fetchProduct:g(r,e),onAddedToCart:function(){return e({type:"PRODUCT_ADDED_TO_CART"})},onChangeSize:function(t){return e(function(e){return{type:"PRODUCT_CHANGED_SIZE",payload:e}}(t))}}})))(Q),J=(r(66),function(e){var t=e.itemId;return n.a.createElement("main",{className:"product-page"},n.a.createElement("div",{className:"container-lg d-flex justify-content-center product__container"},n.a.createElement(G,{itemId:t})))}),Z=function(e){return"/leave-me"+e},W=(r(67),function(){return n.a.createElement("footer",{className:"container-fluid"},n.a.createElement("div",{className:"d-flex flex-row justify-content-center align-items-baseline"},n.a.createElement("div",{className:"p-2 d-flex justify-content-end w-7r"},n.a.createElement(s.b,{className:"link__footer",to:"#"},"Policy")),n.a.createElement("div",{className:"p-2 d-flex justify-content-center w-7r"},n.a.createElement("p",{className:"text__footer"},"Follow us")),n.a.createElement("div",{className:"p-2 links__footer d-flex justify-content-start w-7r"},n.a.createElement(s.b,{to:"#",className:"link__vk"},n.a.createElement("img",{className:"img__footer",alt:"vk",src:Z("/img/vk.svg")})),n.a.createElement(s.b,{to:"#",className:"link__insta"},n.a.createElement("img",{alt:"instagram",src:Z("/img/instagram.svg")})))),n.a.createElement("div",{className:"d-flex flex-row justify-content-center"},n.a.createElement("div",{className:"p-2"},n.a.createElement("p",{className:"text__footer"},"\xa9Leave me 2020"))))}),q=function(e){var t=e.product,r=e.onIncrease,a=e.onDecrease,c=e.onDelete,o=t.title,l=t.image,i=t.total,u=t.id,d=t.count,m=t.size;return n.a.createElement("div",{className:"row cart__row"},n.a.createElement("div",{className:"col-4"},n.a.createElement("img",{alt:"product",src:l})),n.a.createElement("div",{className:"col-8 align-content-between d-flex justify-content-around flex-column"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-10"},n.a.createElement(s.b,{to:"/product/".concat(u)},o)),n.a.createElement("div",{className:"col-1"},n.a.createElement("img",{className:"close__product",onClick:function(){return c(u,m)},src:Z("/img/close.svg"),alt:"close"}))),n.a.createElement("p",{className:"row"},m),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6 count__sidebar"},n.a.createElement("p",null,n.a.createElement("img",{alt:"minus",onClick:function(){return a(u,m)},className:"control__sidebar left",src:Z("/img/minus.svg")}),n.a.createElement("span",null,d," \u0448\u0442"),n.a.createElement("img",{alt:"plus",onClick:function(){return r(u,m)},className:"control__sidebar right",src:Z("/img/more.svg")}))),n.a.createElement("div",{className:"col-6"},n.a.createElement("p",{className:"float-right"},i)))))},K=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){var e=this.props,t=e.orderTotal,r=e.cartItems,a=e.visible,c=e.toggleSidebar,o=e.onIncrease,l=e.onDecrease,i=e.onDelete,u=a?"active":"";return n.a.createElement("div",{className:"sidebar-wrapper"},n.a.createElement("div",{className:"sidebar cart__sidebar ".concat(u)},n.a.createElement("div",{className:"sidebar__header col-12"},n.a.createElement("p",{className:"text-center text-uppercase"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430")),n.a.createElement("div",{className:"body__sidebar col-12"},r.map((function(e,t){return n.a.createElement(q,{key:t,product:e,onIncrease:o,onDecrease:l,onDelete:i})}))),n.a.createElement("div",{className:"footer__sidebar col-12"},n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"text"},"\u0418\u0442\u043e\u0433\u043e: ",t,"\u0440"))),n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement(s.b,{to:"/",className:"btn btn-primary"},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437")))),n.a.createElement("img",{className:"close__sidebar justify-content-center",onClick:c,src:Z("/img/next.svg"),alt:"close"})))}}]),r}(a.Component),X={onIncrease:function(e,t){return{type:"PRODUCT_INCREASE_IN_CART",payload:{productId:e,productSize:t}}},onDecrease:function(e,t){return{type:"PRODUCT_DECREASE_IN_CART",payload:{productId:e,productSize:t}}},onDelete:function(e,t){return{type:"ALL_PRODUCTS_REMOVED_FROM_CART",payload:{productId:e,productSize:t}}}},Y=Object(l.b)((function(e){var t=e.shoppingCart;return{orderTotal:t.orderTotal,cartItems:t.cartItems}}),X)(K),$=(r(68),function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={sidebarVisible:!1},e.toggleSidebar=function(){e.setState({sidebarVisible:!e.state.sidebarVisible})},e}return Object(d.a)(r,[{key:"render",value:function(){return n.a.createElement(a.Fragment,null,n.a.createElement("nav",{className:"main-nav row align-items-center flex-nowrap"},n.a.createElement("div",{className:"col-4 offset-4 main-nav__logo"},n.a.createElement(s.b,{to:"/"},n.a.createElement("img",{src:Z("/img/logo.svg"),alt:"logo"}))),n.a.createElement("div",{className:"col-4"},n.a.createElement("img",{className:"main-nav__cart-icon toggle-bag float-right",onClick:this.toggleSidebar,src:Z("/img/bag.svg"),alt:"bag"}))),n.a.createElement(Y,{toggleSidebar:this.toggleSidebar,visible:this.state.sidebarVisible}))}}]),r}(a.Component)),ee=(r(69),r(70),function(){return n.a.createElement("div",{className:"not-found-alert"},n.a.createElement("h1",{className:"alert alert-warning"},"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u0422\u044b \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e Leave Me."))}),te=function(){return n.a.createElement(a.Fragment,null,n.a.createElement($,null),n.a.createElement(i.c,null,n.a.createElement(i.a,{path:"/",component:x,exact:!0}),n.a.createElement(i.a,{path:"/product/:id?",render:function(e){var t=e.match.params.id;return n.a.createElement(J,{itemId:t})}}),n.a.createElement(i.a,{component:ee})),n.a.createElement(W,null))},re=function(e){Object(m.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={hasError:!1},e}return Object(d.a)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?n.a.createElement(f,null):this.props.children}}]),r}(a.Component),ae=r(12),ne=r.n(ae),ce=r(20),oe=function(e,t){if(void 0===e)return{products:[],loading:!0};switch(t.type){case"FETCH_PRODUCTS_REQUEST":return{products:[],error:null,loading:!0};case"FETCH_PRODUCTS_SUCCESS":return{products:t.payload,error:null,loading:!1};case"FETCH_PRODUCTS_FAILURE":return{products:[],error:t.payload,loading:!1};default:return e.productList}},le=r(30),se=function(e,t){if(void 0===e)return{loading:!0,product:null,error:null};switch(t.type){case"FETCH_PRODUCT_REQUEST":return{product:null,error:null,loading:!0};case"FETCH_PRODUCT_SUCCESS":return{product:t.payload,error:null,loading:!1};case"FETCH_PRODUCT_FAILURE":return{product:null,error:t.payload,loading:!1};case"PRODUCT_CHANGED_SIZE":return Object(le.a)({},e.productPage,{product:Object(le.a)({},e.productPage.product,{currentSize:t.payload})});default:return e.productPage}},ie=r(17),ue=function(e,t,r){return 0===t.count?[].concat(Object(ie.a)(e.slice(0,r)),Object(ie.a)(e.slice(r+1))):-1===r?[].concat(Object(ie.a)(e),[t]):[].concat(Object(ie.a)(e.slice(0,r)),[t],Object(ie.a)(e.slice(r+1)))},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=t.title,n=void 0===a?e.title:a,c=t.size,o=void 0===c?e.currentSize:c,l=t.image,s=void 0===l?e.images[0]:l,i=t.id,u=void 0===i?e.id:i,d=t.count,m=void 0===d?0:d,p=t.total,f=void 0===p?0:p;return{cost:e.cost,title:n,image:s,id:u,size:o,count:m+r,total:f+r*e.cost}},me=function(e,t,r,a){var n,c,o=e.shoppingCart.cartItems;n=o.findIndex((function(e){var a=e.id,n=e.size;return a===t&&n===r})),c=o[n];var l=de(c,c,a),s=ue(o,l,n);return{orderTotal:s.reduce((function(e,t){return e+(t.total||0)}),0),cartItems:s}},pe=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0};switch(t.type){case"PRODUCT_ADDED_TO_CART":return function(e){var t=e.productPage.product,r=e.shoppingCart.cartItems,a=r.findIndex((function(e){var r=e.id,a=e.size;return r===t.id&&a===t.currentSize})),n=r[a],c=de(t,n,1),o=ue(r,c,a);return{orderTotal:o.reduce((function(e,t){return e+(t.total||0)}),0),cartItems:o}}(e);case"PRODUCT_INCREASE_IN_CART":return me(e,t.payload.productId,t.payload.productSize,1);case"PRODUCT_DECREASE_IN_CART":return me(e,t.payload.productId,t.payload.productSize,-1);case"ALL_PRODUCTS_REMOVED_FROM_CART":var r=e.shoppingCart.cartItems.find((function(e){var r=e.id,a=e.size;return r===t.payload.productId&&a===t.payload.productSize}));return me(e,t.payload.productId,t.payload.productSize,-r.count);default:return e.shoppingCart}},fe=function(e,t){return{productList:oe(e,t),productPage:se(e,t),shoppingCart:pe(e,t)}},ve=Object(b.c)(fe),Ee=new function e(){var t=this;Object(u.a)(this,e),this._apiBase="https://majeste.pythonanywhere.com/api/v1",this.getResource=function(){var e=Object(ce.a)(ne.a.mark((function e(r){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(r));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(r)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllProducts=Object(ce.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/products/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getProduct=function(){var e=Object(ce.a)(ne.a.mark((function e(r){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/products/".concat(r,"/"));case 2:return(a=e.sent).currentSize=a.sizes[0],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addOrder=function(){var e=Object(ce.a)(ne.a.mark((function e(r){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/orders/",{method:"POST",data:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};o.a.render(n.a.createElement(l.a,{store:ve},n.a.createElement(re,null,n.a.createElement(h,{value:Ee},n.a.createElement(s.a,{basename:"/leave-me"},n.a.createElement(te,null))))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.16032b8a.chunk.js.map